"use strict";require(["config"],function(){require(["jquery","header","lunbo","template"],function(a,i,t,r){new Promise(function(t,e){a("header").load("/html/component/header.html",function(){i.init(),t()}),a("footer").load("/html/component/footer.html")}).then(function(){}).then(function(){if(a.cookie("cart")){var t=a.cookie("cart"),e=JSON.parse(t);console.log(e);var i=r("cart-template",{carts:e});a("tbody").html(i);var n=a(".inputs");a("select").on("change",a("select option"),function(){var t=a(this).find("option:selected").html(),e=a(this).parents(".carts").find(".price").find("span").html();console.log(t),console.log(e),a(this).parents(".carts").find(".final-price").find("span").html(t*e),o()}),a(".delete1").click(function(){if(confirm("确定要删除该商品吗？")){var i=JSON.parse(a.cookie("cart"));console.log(a(this).parents(".carts")),a(this).parents(".carts").remove();var c=a(this).attr("data-id");i.forEach(function(t,e){t.id==c&&(i.splice(e,1),n=a(".inputs"),o())}),a.cookie("cart",JSON.stringify(i),{path:"/",expires:7})}}),a("#btn2").click(function(){if(confirm("确定要删除全部商品吗？")){var t=JSON.parse(a.cookie("cart"));a(".carts").each(function(){a(this).remove()}),a.cookie("cart",JSON.stringify(t),{path:"/",expires:-7}),a("#allprice").html(0),a("#final_allprice").html(0)}}),a("#btn1").click(function(){if(confirm("确定要删除选中的商品吗？")){var c=JSON.parse(a.cookie("cart"));console.log(c),a(".carts").each(function(){if(a(this).find(".inputs")[0].checked){var i=a(this).attr("data-id");c.forEach(function(t,e){t.id==i&&c.splice(e,1)}),a(this).remove(),a.cookie("cart",JSON.stringify(c),{path:"/",expires:7})}}),a("#allprice").html(0),a("#final_allprice").html(0)}});var c=a("#all");c.change(function(){this.checked?(n.each(function(){this.checked=!0}),n.length):(n.each(function(){this.checked=!1}),0),o()}),n.change(function(){o()})}function o(){var e=0,i=0;n.each(function(){if(1==this.checked){var t=parseInt(a(this).parents(".carts").find(".final-price").find("span").html());console.log(t),i+=t,e++}else e--;e===n.length?c[0].checked=!0:c[0].checked=!1}),a("#allprice").html(i),a("#final_allprice").html(i)}})})});